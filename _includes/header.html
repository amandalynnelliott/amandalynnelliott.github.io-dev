<header class="site-header" role="banner">
	<div class="wrapper">
		<a class="site-title" href="/">{{ site.title }}</a>
		<button class="menu-button" type="button">Menu</button>
		<nav class="site-nav">
			<ul class="nav-menu">
				<li class="nav-item">
					<a class="nav-link" href="/">Blog</a>
					<ul class="nav-submenu">
						{% for category in site.categories %}
						<li class="nav-submenu-item">
							<a href="/c/{{ category | first }}/"><span
									class="fa fa-angle-right caret">&emsp;</span>{{ category | first | capitalize }}</a>
						</li>
						{% endfor %}
						<li>
							<a href="/archives/"><span class="fa fa-angle-right caret">&emsp;</span>Full Archive</a>
						</li>
						<li>
							<a href="/email-signup/"><span class="fa fa-angle-right caret">&emsp;</span>Blog Posts by
								Email</a>
						</li>
					</ul>
				</li>
				<!--li class="nav-item">
					<a class="nav-link" href="/projects/">Projects</a>
				</li-->
				<li class="nav-item">
					<a class="nav-link" href="/about/">About</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/contact/">Contact</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/search/"><span class="fa fa-search"></span></a>
					<ul class="nav-submenu search-box">
						<li>
							<form action="/search/" method="get">
								<label for="search-box"></label>
								<input type="text" class="search-box" name="query" placeholder="Search">
							</form>
						</li>
					</ul>
				</li>
			</ul>
		</nav>
	</div>
</header>

<script>
	var onPhone = 425;
	var onTablet = 768;

	$(document).ready(function () {
		// only on mobile
		$('.menu-button').click(function () {
			if ($(this).hasClass('open')) {
				$(this).removeClass('open'); // turn the button off
				$('.site-nav').removeClass('open'); // hides the menu
				$('.nav-menu').removeClass('open'); // hides the menu

				//$('.site-nav').slideUp(1000);
				//$('.nav-menu').slideUp(1000);
			} else {
				$(this).addClass('open'); // turn the button on
				$('.site-nav').addClass('open'); // show the menu
				$('.nav-menu').addClass('open'); // show the menu

				//$('.site-nav').slideDown(1000);
				//$('.nav-menu').slideDown(1000);
			}
		});

		$('.nav-item').hover(function () {
			$(this).addClass('open');
		}, function () {
			if ($(window).width() > onPhone) { // if not on phone
				$('.nav-item').removeClass('open'); // turns off all nav item buttons
				$('.nav-submenu').removeClass('open'); // hides all nav submenus
			}
		});

		$('.nav-link').click(function (e) {
			e.preventDefault(); // stop the page from going to the link
			if (!isTouchDevice()) {
				document.location.href = $(this).attr('href'); // goes to the link
			} else {
				if ($(this).siblings('.nav-submenu').length == 0 || $(this).siblings('.nav-submenu').hasClass('open')) { // if there is no submenu, or the submenu is open
					document.location.href = $(this).attr('href'); // goes to the link
				} else {
					$(this).siblings('.nav-submenu').addClass('open'); // open the submenu
				}
			}
		});
	});

	function isTouchDevice() {
		return 'ontouchstart' in document.documentElement;
	}

</script>
